@{
    Layout = null;
}
<form action="" method="post" class="form-horizontal" id="_ModalForm">
    <input type="hidden" name="ID" value="@Request.QueryString["ID"]" />
    <div id="Edit-modal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">关闭</span></button>
                    <h4 class="modal-title">VIP充值</h4>
                </div>
                <div class="modal-body">
                    <div class="error-panel"></div>

                    <div class="form-group">
                        <label class="col-sm-3 control-label">账号</label>
                        <div class="col-sm-9">
                            <input type="text" value="@ViewBag.Account" id="Account" readonly="readonly" name="Account" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">VIP状态</label>
                        <div class="col-sm-9">
                            <input type="text" value="@ViewBag.vipstate" id="vipstate" readonly="readonly" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">续费方式</label>
                        <div class="col-sm-9">
                            <select name="loadtype" id="loadtype" onchange="waychange()" class="form-control">
                                <option value="1">按时长</option>
                                <option value="2">按到期时间</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group" id="bytime">
                        <label class="col-sm-3 control-label">充值时间</label>
                        <div class="col-sm-9">
                            <select name="VIPTime" id="VIPTime" class="form-control">
                                <option value="1">一个月</option>
                                <option value="2">半年</option>
                                <option value="3">一年</option>
                                <option value="4">永久</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="display:none" id="byend">
                        <label class="col-sm-3 control-label">到期时间</label>
                        <div class="col-sm-9">
                            <input type="text" value="" id="endTime2"  name="endTime2" class="form-control" />
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" onclick="dosub()" class="btn btn-primary">提交</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
</form>



@*<script src="~/Content/js/jquery-1.10.2.min.js"></script>*@
<script type="text/javascript">
        $(function () {
        $('#endTime2').datetimepicker({ language: 'zh-cn', format: 'YYYY-MM-DD 23:59:59' });
    })
    $('#Edit-modal').modal('show');

    function dosub() {
        var datamenu = $("#_ModalForm").serialize();
        $.post("/User/VIPLoad", datamenu, function (res) {
            alert(res);
            if (res == "操作成功") {
                location.reload();
            }

        })
    }

    function waychange() {
        var loadtype = $("#loadtype").val();
        if (loadtype == "1") {
            $("#bytime").show();
            $("#byend").hide();
        }
        else {
            $("#bytime").hide();
            $("#byend").show();
        }
    }
</script>